while (1) {
  current_log_size = get_log_size(destination_path);
  if (current_log < LIMIT_SIZE) continue;
  
  // using ctime library
  time_t now = time(0);
  tm *ltm = localtime(&now);
  current_date = std::to_string(ltm->tm_year + 1970)
         + "-" + std::to_string(ltm->tm_mon)
         + "-" + std::to_string(ltm->tm_mday);

  // use mutex to block logging while archiving
  unique_lock<mutex> lock(mutex);
  // archive current log file 
  logfile = destination_path  + "/current.log";
  archivefile = destination_path + "/current_" + current_date + ".log";
  system("mv " + logfile + " " + archivefile);
  system("gzip " + archivefile);
  system("touch " + logfile);
  lock.unlock();
  sleep(WHOLE_DAY)
}
